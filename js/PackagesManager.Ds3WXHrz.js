import{I as me,r as m,c as G,d as te,a as n,e as i,b as g,t as f,o as t,n as S,p as C,_ as T,F as L,s as ve,i as fe,k as d,E as he,j as b,w as j,h as H,l as E,T as xe,m as F,x as be,A as ke,B as pe,J as we,K as Pe,H as $e}from"./main.Dyol8uth.js";function Ce(e,v){const o=e.replace(/^v/,""),y=v.replace(/^v/,""),p=o.split(".").map(Number),w=y.split(".").map(Number),h=Math.max(p.length,w.length);for(let x=0;x<h;x++){const U=p[x]||0,$=w[x]||0;if(U>$)return 1;if(U<$)return-1}return 0}function Ue(e,v){return Ce(e,v)<0}const ie=[{name:"uv",displayName:"uv",description:"极快的 Python 包管理器和项目管理工具",category:"开发工具"},{name:"requests",displayName:"Requests",description:"优雅简洁的 HTTP 库",category:"Web框架"},{name:"flask",displayName:"Flask",description:"轻量级 Web 框架",category:"Web框架"},{name:"django",displayName:"Django",description:"全功能 Web 框架",category:"Web框架"},{name:"fastapi",displayName:"FastAPI",description:"现代高性能 Web 框架",category:"Web框架"},{name:"numpy",displayName:"NumPy",description:"科学计算基础库",category:"数据科学"},{name:"pandas",displayName:"Pandas",description:"数据分析库",category:"数据科学"},{name:"matplotlib",displayName:"Matplotlib",description:"数据可视化库",category:"数据科学"},{name:"scikit-learn",displayName:"Scikit-Learn",description:"机器学习库",category:"机器学习"},{name:"tensorflow",displayName:"TensorFlow",description:"深度学习框架",category:"机器学习"},{name:"pytorch",displayName:"PyTorch",description:"深度学习框架",category:"机器学习"},{name:"pytest",displayName:"pytest",description:"Python 测试框架",category:"测试工具"},{name:"black",displayName:"Black",description:"代码格式化工具",category:"开发工具"},{name:"pylint",displayName:"Pylint",description:"代码检查工具",category:"开发工具"},{name:"ipython",displayName:"IPython",description:"增强的交互式 Python Shell",category:"开发工具"}],Te=me("packages",()=>{const e=m([]),v=m([]),o=m(!1),y=m(!1),p=m(!1),w=m(0),h=m(""),x=m(new Set),U=m(!1),$=m(!1),J=m(!1),R=m(""),ae=G(()=>{const s={};return e.value.forEach(a=>{const u=a.category||"其他";s[u]||(s[u]=[]),s[u].push(a)}),s}),W=G(()=>e.value.filter(s=>s.hasUpdate)),Q=G(()=>{const s=new Set(e.value.map(a=>a.name));return ie.filter(a=>!s.has(a.name))});async function P(){o.value=!0;try{const s=await window.pythonToolboxAPI.listGlobalPackages();e.value=s.packages.map(a=>{const u=ie.find(k=>k.name===a.name);return{name:a.name,displayName:u?.displayName||a.name,currentVersion:a.version,latestVersion:void 0,hasUpdate:!1,category:u?.category||"其他",description:u?.description,recommended:!!u}})}catch(s){console.error("获取包列表失败:",s),e.value=[]}finally{o.value=!1}}async function z(s){try{const a=await window.pythonToolboxAPI.getLatestVersion(s);if(a){const u=e.value.find(k=>k.name===s);u&&(u.latestVersion=a,u.hasUpdate=Ue(u.currentVersion,a))}}catch(a){console.error(`检查 ${s} 更新失败:`,a)}}async function oe(){if(!(e.value.length===0||p.value)){p.value=!0,w.value=0,h.value="",x.value.clear(),U.value=!1,$.value=!1;try{const s=e.value.length,a=5;let u=0;const k=e.value.map(q=>q.name);let O=0;const Z=()=>O>=k.length?-1:O++,ne=async()=>{for(;!U.value;){const q=Z();if(q<0)break;const B=k[q];x.value.add(B),h.value||(h.value=B);try{await z(B)}catch(le){console.error(`检查 ${B} 更新失败:`,le)}finally{x.value.delete(B),u++,w.value=Math.round(u/s*100),h.value===B&&(x.value.size>0?h.value=Array.from(x.value)[0]:u===s&&(h.value=""))}}},se=Array.from({length:a},()=>ne());await Promise.all(se)}catch(s){console.error("批量检查更新失败:",s)}finally{h.value="",x.value.clear(),p.value=!1,w.value=0,U.value=!1,$.value=!1}}}function V(){h.value?($.value=!0,U.value=!0):(U.value=!0,$.value=!1)}async function M(s){return A(async()=>{try{const a=await window.pythonToolboxAPI.installGlobalPackage(s);return a.success&&await P(),a.success}catch(a){return console.error("安装包失败:",a),!1}},`安装 ${s}`)}async function X(s){return A(async()=>{try{const a=await window.pythonToolboxAPI.updateGlobalPackage(s);return a.success&&await P(),a.success}catch(a){return console.error("更新包失败:",a),!1}},`更新 ${s}`)}async function Y(s){return A(async()=>{try{const a=await window.pythonToolboxAPI.uninstallGlobalPackage(s);return a.success&&await P(),a.success}catch(a){return console.error("卸载包失败:",a),!1}},`卸载 ${s}`)}async function N(){const s=W.value.map(a=>a.name);s.length!==0&&await A(async()=>{o.value=!0;try{await window.pythonToolboxAPI.batchUpdatePackages(s),await P()}catch(a){console.error("批量更新失败:",a)}finally{o.value=!1}},`批量更新 ${s.length} 个包`)}async function K(){const s=Q.value.map(a=>a.name);s.length!==0&&await A(async()=>{o.value=!0;try{for(const a of s)try{await window.pythonToolboxAPI.installGlobalPackage(a)}catch(u){console.error(`安装推荐工具 ${a} 失败:`,u)}await P()}catch(a){console.error("批量安装失败:",a)}finally{o.value=!1}},`批量安装 ${s.length} 个推荐工具`)}async function D(s){if(!s.trim()){v.value=[];return}y.value=!0;try{const a=await window.pythonToolboxAPI.searchPyPIPackages(s),u=new Set(e.value.map(k=>k.name));v.value=a.packages.map(k=>({...k,installed:u.has(k.name),currentVersion:e.value.find(O=>O.name===k.name)?.currentVersion}))}catch(a){console.error("搜索包失败:",a),v.value=[]}finally{y.value=!1}}async function A(s,a){J.value=!0,R.value=a;try{return await s()}finally{J.value=!1,R.value=""}}return{packages:e,searchResults:v,isLoading:o,isSearching:y,isCheckingUpdates:p,checkProgress:w,currentCheckingPackage:h,currentlyCheckingPackages:x,isCancelling:$,commandLoading:J,commandMessage:R,packagesByCategory:ae,packagesWithUpdate:W,uninstalledRecommended:Q,recommendedTools:ie,fetchPackages:P,checkPackageUpdate:z,checkAllUpdates:oe,cancelCheckUpdates:V,installPackage:M,updatePackage:X,uninstallPackage:Y,updateAllPackages:N,installRecommendedTools:K,searchPackages:D}}),Ve={class:"flex items-center justify-center gap-2 text-gray-600"},Ae={key:0},de=te({__name:"Loading",props:{text:{default:"加载中..."}},setup(e){return(v,o)=>(t(),n("div",Ve,[o[0]||(o[0]=i("span",{class:"loading-spinner"},null,-1)),e.text?(t(),n("span",Ae,f(e.text),1)):g("",!0)]))}}),Ie=["title","disabled"],ee=te({__name:"PackageActionButton",props:{icon:{},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},title:{default:""},variant:{default:"blue"}},emits:["click"],setup(e){const v=e,o=G(()=>{switch(v.variant){case"green":return"text-green-600 hover:bg-green-50";case"red":return"text-red-600 hover:bg-red-50";default:return"text-blue-600 hover:bg-blue-50"}}),y=G(()=>{switch(v.variant){case"green":return"border-green-600 border-t-transparent";case"red":return"border-red-600 border-t-transparent";default:return"border-blue-600 border-t-transparent"}});return(p,w)=>(t(),n("button",{class:S(["w-6 h-6 flex items-center justify-center rounded transition-all disabled:opacity-50",o.value]),title:e.title,disabled:e.disabled||e.loading,onClick:w[0]||(w[0]=h=>p.$emit("click"))},[e.loading?(t(),n("div",{key:1,class:S(["w-2.5 h-2.5 border-2 rounded-full animate-spin",y.value])},null,2)):(t(),C(T,{key:0,name:e.icon,size:"xs"},null,8,["name"]))],10,Ie))}}),ze={class:"flex items-start justify-between gap-2"},Be={class:"flex-1 min-w-0"},Se={class:"flex items-center gap-1 mb-0.5"},Re={class:"text-xs font-semibold text-gray-900 truncate"},Ne={key:0,class:"px-1 py-0.5 text-[10px] font-medium bg-green-100 text-green-700 rounded flex-shrink-0"},Le={key:1,class:"px-1 py-0.5 text-[10px] font-medium bg-green-100 text-green-700 rounded flex-shrink-0"},We={class:"flex items-center gap-1 text-[10px] flex-wrap mb-1"},Me={key:0,class:"px-1 py-0.5 font-mono text-blue-600 bg-blue-50 rounded"},je={class:"px-1 py-0.5 font-mono text-amber-600 bg-amber-50 rounded"},Ee={key:2,class:"px-1 py-0.5 font-medium text-green-600 bg-green-50 rounded"},Fe={key:0,class:"text-[10px] text-gray-500 leading-tight line-clamp-1 mt-0.5"},Ge={key:0,class:"flex items-center gap-1 px-1.5 py-0.5 rounded bg-blue-50 border border-blue-200"},ue=te({__name:"PackageCard",props:{data:{},variant:{default:"installed"},operation:{}},emits:["install","update","uninstall","open-link","check-update"],setup(e){return(v,o)=>(t(),n("div",{class:S(["p-2 bg-white border rounded-lg hover:border-indigo-400 transition-all group",[e.variant==="recommended"?"border-indigo-200 bg-indigo-50/20":e.variant==="search"&&"installed"in e.data&&e.data.installed?"border-green-200 bg-green-50/20":"border-gray-200"]])},[i("div",ze,[i("div",Be,[i("div",Se,[i("h4",Re,f(("displayName"in e.data?e.data.displayName:void 0)||e.data.name),1),"recommended"in e.data&&e.data.recommended?(t(),n("span",Ne," 推荐 ")):"installed"in e.data&&e.data.installed&&e.variant==="search"?(t(),n("span",Le," 已安装 ")):g("",!0)]),i("div",We,["currentVersion"in e.data&&e.data.currentVersion||"version"in e.data&&e.data.version?(t(),n("span",Me,f("currentVersion"in e.data&&e.data.currentVersion?e.data.currentVersion:"version"in e.data&&e.data.version?`v${e.data.version}`:""),1)):g("",!0),"hasUpdate"in e.data&&e.data.hasUpdate&&"latestVersion"in e.data&&e.data.latestVersion?(t(),n(L,{key:1},[o[4]||(o[4]=i("span",{class:"text-amber-600"},"→",-1)),i("span",je,f(e.data.latestVersion),1)],64)):"latestVersion"in e.data&&e.data.latestVersion&&"hasUpdate"in e.data&&!e.data.hasUpdate?(t(),n("span",Ee," 最新 ")):g("",!0)]),e.data.description&&e.variant!=="installed"?(t(),n("p",Fe,f(e.data.description),1)):g("",!0)]),i("div",{class:S(["flex items-center gap-0.5 transition-opacity flex-shrink-0",e.operation?.updating||e.operation?.uninstalling||e.operation?.installing||e.operation?.checking?"opacity-100":"opacity-0 group-hover:opacity-100"])},[e.operation?.checking&&e.variant==="installed"?(t(),n("div",Ge,[...o[5]||(o[5]=[i("div",{class:"w-2.5 h-2.5 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"},null,-1),i("span",{class:"text-[10px] text-blue-600 font-medium"},"检查中",-1)])])):g("",!0),e.variant==="installed"&&(!("latestVersion"in e.data)||e.data.latestVersion===void 0)&&!e.operation?.checking?(t(),C(ee,{key:1,icon:"search",variant:"blue",title:"检查更新",disabled:e.operation?.updating||e.operation?.uninstalling||e.operation?.installing,onClick:o[0]||(o[0]=y=>v.$emit("check-update",e.data.name))},null,8,["disabled"])):g("",!0),"hasUpdate"in e.data&&e.data.hasUpdate&&e.variant==="installed"?(t(),C(ee,{key:2,icon:"upload",variant:"green",title:"更新",loading:e.operation?.updating,disabled:e.operation?.uninstalling||e.operation?.installing||e.operation?.checking||e.operation?.updating,onClick:o[1]||(o[1]=y=>v.$emit("update",e.data.name))},null,8,["loading","disabled"])):g("",!0),e.variant==="recommended"||e.variant==="search"&&(!("installed"in e.data)||!e.data.installed)?(t(),C(ee,{key:3,icon:"download",variant:"green",title:"安装",loading:e.operation?.installing,disabled:e.operation?.updating||e.operation?.uninstalling||e.operation?.checking||e.operation?.installing,onClick:o[2]||(o[2]=y=>v.$emit("install",e.data.name))},null,8,["loading","disabled"])):g("",!0),e.variant==="installed"?(t(),C(ee,{key:4,icon:"trash",variant:"red",title:"卸载",loading:e.operation?.uninstalling,disabled:e.operation?.updating||e.operation?.installing||e.operation?.checking||e.operation?.uninstalling,onClick:o[3]||(o[3]=y=>v.$emit("uninstall",e.data.name))},null,8,["loading","disabled"])):g("",!0)],2)])],2))}}),Ke={class:"w-full h-full overflow-y-auto relative"},De={key:0,class:"flex items-center gap-2"},Oe={class:"p-4"},qe={class:"max-w-6xl mx-auto"},He={class:"flex items-center justify-between mb-4 border-b border-gray-200"},Je={class:"flex items-center gap-2"},Qe=["onClick"],Xe=["title"],Ye={key:0,class:"w-2.5 h-2.5 border-2 border-indigo-600 border-t-transparent rounded-full animate-spin"},Ze={key:1,class:"w-2.5 h-2.5 border-2 border-orange-600 border-t-transparent rounded-full animate-spin"},_e={key:2,class:"ml-1 text-[10px] opacity-75"},et={key:0,class:"mb-4"},tt={class:"flex gap-2"},at={class:"flex-1 relative"},nt={key:1,class:"py-12 text-center"},st={key:2},lt={key:0,class:"py-12 text-center"},it={key:1,class:"space-y-4"},ot={class:"text-xs font-semibold text-gray-700 mb-2 px-1"},rt={class:"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-2"},ct={key:3},dt={key:0,class:"py-12 text-center"},ut={key:1,class:"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-2"},gt={key:4},yt={class:"mb-4"},mt={key:0,class:"py-12 text-center"},vt={key:1,class:"space-y-4"},ft={class:"text-xs font-semibold text-gray-700 mb-2 px-1"},ht={class:"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-2"},xt={class:"flex flex-col gap-1.5"},bt={class:"text-xs font-semibold text-gray-900"},kt={class:"text-[10px] text-gray-500 line-clamp-2 leading-tight"},pt={key:5},wt={key:0,class:"py-12 text-center"},Pt={key:1,class:"py-12 text-center"},$t={key:2,class:"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-2"},Ct={class:"flex flex-col gap-1"},Ut={class:"flex items-center gap-1 mb-0.5"},Tt={class:"text-xs font-semibold text-gray-900 truncate flex-1"},Vt={key:0,class:"px-1 py-0.5 text-[10px] bg-green-100 text-green-700 rounded flex-shrink-0"},At={class:"text-[10px] font-mono text-blue-600 bg-blue-50 px-1 py-0.5 rounded self-start"},It={class:"text-[10px] text-gray-500 line-clamp-2 leading-tight"},zt={key:0,class:"text-[10px] text-gray-400 truncate"},Bt={key:2,class:"text-[10px] text-green-600 text-center py-1"},Rt=te({__name:"PackagesManager",setup(e){const v=he(),o=Te(),y=$e(),p=Pe(),{packages:w,searchResults:h,isLoading:x,isSearching:U,isCheckingUpdates:$,checkProgress:J,currentCheckingPackage:R,currentlyCheckingPackages:ae,isCancelling:W,packagesByCategory:Q,packagesWithUpdate:P,uninstalledRecommended:z,recommendedTools:oe}=ve(o),V=m("installed"),M=m(""),X=m(!1),Y=m(!1),N=m(""),K=m(""),D=m(""),A=m("");function s(l){return{installing:N.value===l,updating:K.value===l,uninstalling:D.value===l,checking:A.value===l||ae.value.has(l)}}function a(l){return N.value===l||K.value===l||D.value===l||A.value===l||R.value===l}const u=G(()=>[{key:"installed",label:"已安装",count:w.value.length},{key:"updates",label:"可更新",count:P.value.length},{key:"recommended",label:"推荐工具",count:z.value.length},{key:"search",label:"搜索"}]),k=G(()=>{const l=new Set;return z.value.forEach(r=>{l.add(r.category)}),Array.from(l)});function O(l){return z.value.filter(r=>r.category===l)}async function Z(){await o.fetchPackages()}async function ne(){await o.checkAllUpdates()}function se(){o.cancelCheckUpdates()}async function q(l){if(!a(l)){A.value=l;try{await o.checkPackageUpdate(l)}finally{A.value=""}}}async function B(l){if(!a(l)){K.value=l;try{await o.updatePackage(l)?y.success(`${l} 更新成功！`):y.error(`${l} 更新失败！`)}finally{K.value=""}}}async function le(l){if(!(a(l)||!await p.confirm(`确定要卸载 ${l} 吗？`))){D.value=l;try{await o.uninstallPackage(l)?y.success(`${l} 卸载成功！`):y.error(`${l} 卸载失败！`)}finally{D.value=""}}}async function re(l){if(!a(l)){N.value=l;try{await o.installPackage(l)?y.success(`${l} 安装成功！`):y.error(`${l} 安装失败！`)}finally{N.value=""}}}async function ge(){if(await p.confirm(`确定要更新 ${P.value.length} 个包吗？`)){X.value=!0;try{await o.updateAllPackages(),y.success("批量更新完成！")}finally{X.value=!1}}}async function ye(){if(await p.confirm(`确定要安装 ${z.value.length} 个推荐工具吗？`)){Y.value=!0;try{await o.installRecommendedTools(),y.success("批量安装完成！")}finally{Y.value=!1}}}async function ce(){M.value.trim()&&await o.searchPackages(M.value)}return fe(async()=>{try{await Z()}catch(l){console.error("初始化包列表失败:",l)}}),(l,r)=>(t(),n("div",Ke,[(t(),C(xe,{to:"#tab-actions"},[d(v).path==="/packages"?(t(),n("div",De,[b(E,{onClick:Z,loading:d(x),size:"sm",variant:"secondary"},{default:j(()=>[b(T,{name:"refresh",size:"sm",class:S({"animate-spin":d(x)})},null,8,["class"]),r[1]||(r[1]=H(" 刷新 ",-1))]),_:1},8,["loading"]),b(E,{onClick:ne,loading:d($),size:"sm",variant:"secondary"},{default:j(()=>[d($)?g("",!0):(t(),C(T,{key:0,name:"search",size:"sm"})),r[2]||(r[2]=H(" 检查更新 ",-1))]),_:1},8,["loading"]),d(P).length>0?(t(),C(E,{key:0,onClick:ge,loading:X.value,size:"sm"},{default:j(()=>[b(T,{name:"refresh",size:"sm"}),H(" 批量更新 ("+f(d(P).length)+") ",1)]),_:1},8,["loading"])):g("",!0)])):g("",!0)])),i("div",Oe,[i("div",qe,[i("div",He,[i("div",Je,[(t(!0),n(L,null,F(u.value,c=>(t(),n("button",{key:c.key,onClick:I=>V.value=c.key,class:S(["px-4 py-2 text-sm font-medium transition-all relative",V.value===c.key?"text-indigo-600 border-b-2 border-indigo-600":"text-gray-600 hover:text-gray-900"])},[H(f(c.label)+" ",1),c.count!==void 0?(t(),n("span",{key:0,class:S(["ml-1.5 px-1.5 py-0.5 text-xs rounded-full",V.value===c.key?"bg-indigo-100 text-indigo-700":"bg-gray-100 text-gray-600"])},f(c.count),3)):g("",!0)],10,Qe))),128))]),d($)?(t(),n("button",{key:0,onClick:be(se,["stop"]),type:"button",class:S(["flex items-center gap-1.5 px-2 py-1 text-xs rounded transition-colors cursor-pointer",d(W)?"text-orange-600 hover:text-orange-700 hover:bg-orange-50":"text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50"]),title:d(W)&&d(R)?`正在等待 ${d(R)} 检查完成...`:"点击取消检查更新"},[d(W)?(t(),n("div",Ze)):(t(),n("div",Ye)),i("span",null,f(d(J))+"%",1),b(T,{name:"x",size:"xs",class:"ml-0.5"}),d(W)&&d(R)?(t(),n("span",_e," 等待中... ")):g("",!0)],10,Xe)):g("",!0)]),V.value==="search"?(t(),n("div",et,[i("div",tt,[i("div",at,[ke(i("input",{"onUpdate:modelValue":r[0]||(r[0]=c=>M.value=c),onKeyup:we(ce,["enter"]),type:"text",placeholder:"搜索 PyPI 包...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500"},null,544),[[pe,M.value]])]),b(E,{onClick:ce,loading:d(U)},{default:j(()=>[b(T,{name:"search",size:"sm"}),r[3]||(r[3]=H(" 搜索 ",-1))]),_:1},8,["loading"])])])):g("",!0),d(x)&&d(w).length===0?(t(),n("div",nt,[b(de),r[4]||(r[4]=i("p",{class:"mt-4 text-gray-500"},"正在加载包列表...",-1))])):V.value==="installed"?(t(),n("div",st,[Object.keys(d(Q)).length===0?(t(),n("div",lt,[...r[5]||(r[5]=[i("p",{class:"text-gray-500"},"暂无已安装的包",-1)])])):(t(),n("div",it,[(t(!0),n(L,null,F(d(Q),(c,I)=>(t(),n("div",{key:I},[i("h3",ot,f(I),1),i("div",rt,[(t(!0),n(L,null,F(c,_=>(t(),C(ue,{key:_.name,data:_,variant:"installed",operation:s(_.name),onCheckUpdate:q,onUpdate:B,onUninstall:le},null,8,["data","operation"]))),128))])]))),128))]))])):V.value==="updates"?(t(),n("div",ct,[d(P).length===0?(t(),n("div",dt,[b(T,{name:"check-circle",size:"xl",class:"text-green-500 mx-auto mb-4"}),r[6]||(r[6]=i("p",{class:"text-gray-500"},"所有包都是最新版本",-1))])):(t(),n("div",ut,[(t(!0),n(L,null,F(d(P),c=>(t(),C(ue,{key:c.name,data:c,variant:"installed",operation:s(c.name),onUpdate:B},null,8,["data","operation"]))),128))]))])):V.value==="recommended"?(t(),n("div",gt,[i("div",yt,[d(z).length>0?(t(),C(E,{key:0,onClick:ye,loading:Y.value},{default:j(()=>[b(T,{name:"download",size:"sm"}),r[7]||(r[7]=H(" 批量安装全部推荐工具 ",-1))]),_:1},8,["loading"])):g("",!0)]),d(z).length===0?(t(),n("div",mt,[b(T,{name:"check-circle",size:"xl",class:"text-green-500 mx-auto mb-4"}),r[8]||(r[8]=i("p",{class:"text-gray-500"},"所有推荐工具都已安装",-1))])):(t(),n("div",vt,[(t(!0),n(L,null,F(k.value,c=>(t(),n("div",{key:c},[i("h3",ft,f(c),1),i("div",ht,[(t(!0),n(L,null,F(O(c),I=>(t(),n("div",{key:I.name,class:"border border-gray-200 rounded-lg p-2 hover:border-indigo-400 transition-all bg-white group"},[i("div",xt,[i("h4",bt,f(I.displayName),1),i("p",kt,f(I.description),1),b(E,{onClick:_=>re(I.name),loading:N.value===I.name,size:"sm",class:"w-full mt-1"},{default:j(()=>[b(T,{name:"download",size:"xs"}),r[9]||(r[9]=i("span",{class:"text-xs"},"安装",-1))]),_:1},8,["onClick","loading"])])]))),128))])]))),128))]))])):V.value==="search"?(t(),n("div",pt,[d(U)?(t(),n("div",wt,[b(de),r[10]||(r[10]=i("p",{class:"mt-4 text-gray-500"},"正在搜索...",-1))])):d(h).length===0&&M.value?(t(),n("div",Pt,[...r[11]||(r[11]=[i("p",{class:"text-gray-500"},"没有找到相关包",-1)])])):d(h).length>0?(t(),n("div",$t,[(t(!0),n(L,null,F(d(h),c=>(t(),n("div",{key:c.name,class:S(["border border-gray-200 rounded-lg p-2 hover:border-indigo-400 transition-all bg-white group",c.installed?"bg-green-50/20 border-green-200":""])},[i("div",Ct,[i("div",Ut,[i("h4",Tt,f(c.name),1),c.installed?(t(),n("span",Vt," 已安装 ")):g("",!0)]),i("span",At,"v"+f(c.version),1),i("p",It,f(c.description),1),c.author?(t(),n("p",zt,f(c.author),1)):g("",!0),c.installed?(t(),n("div",Bt," ✓ 已安装 ")):(t(),C(E,{key:1,onClick:I=>re(c.name),loading:N.value===c.name,size:"sm",class:"w-full mt-1"},{default:j(()=>[b(T,{name:"download",size:"xs"}),r[12]||(r[12]=i("span",{class:"text-xs"},"安装",-1))]),_:1},8,["onClick","loading"]))])],2))),128))])):g("",!0)])):g("",!0)])])]))}});export{Rt as default};
